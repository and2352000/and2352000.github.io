<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Nodejs on Aaron's Blog</title><link>https://and2352000.github.io/tags/nodejs/</link><description>Recent content in Nodejs on Aaron's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 26 Feb 2024 15:07:57 +0800</lastBuildDate><atom:link href="https://and2352000.github.io/tags/nodejs/index.xml" rel="self" type="application/rss+xml"/><item><title>Manage Nodejs Heap in Docker</title><link>https://and2352000.github.io/posts/7-manage-nodejs-heap-in-docker/</link><pubDate>Mon, 26 Feb 2024 15:07:57 +0800</pubDate><guid>https://and2352000.github.io/posts/7-manage-nodejs-heap-in-docker/</guid><description>Container è¨˜æ†¶é«”èª¿æ•´ ğŸ”—åœ¨ local èª¿æ•´ container è¨˜æ†¶é«”å¦‚ä¸‹
docker run --memory 1024m --interactive --tty ravali1906/dockermemory bash ä½†æ˜¯é€™æ¨£æœƒæœ‰ä¸€å€‹å•é¡Œï¼Œæœ‰ç”±æ–¼ container default æœ‰ swapï¼Œæ‰€ä»¥å³ä¾¿ç”¨è¶…éä¹Ÿä¸æœƒOut of memory
é€™æ®µç¨‹å¼ç¢¼ç¨‹å¼ç¢¼æœƒ allocate 1024MB
const buf = Buffer.alloc(+process.argv[2] * 1024 * 1024) console.log(Math.round(buf.length / (1024 * 1024))) console.log(Math.round(process.memoryUsage().rss / (1024 * 1024))) åŸ·è¡Œçµæœ
$ node buffer_example 2000 2000 16 ä»¥ä¸Šé€™æ®µç¨‹å¼ç¢¼æ˜¯åƒè€ƒ ref1 å…¶å¯¦æ˜¯æœ‰å•é¡Œçš„ Buffer.alloc ä¸¦ä¸æœƒç”¨ä½¿ç”¨åˆ° heap
æˆ‘æœ‰é‡æ–°å¯¦ä½œä½†æ˜¯é‚„ä¸å®Œæ•´&amp;hellip;..
memoryUsage æœ‰å››å€‹è³‡è¨Š heapTotal and heapUsed refer to V8&amp;rsquo;s memory usage. external refers to the memory usage of C++ objects bound to JavaScript objects managed by V8.</description></item></channel></rss>