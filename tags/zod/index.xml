<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Zod on Aaron's Blog</title><link>https://and2352000.github.io/tags/zod/</link><description>Recent content in Zod on Aaron's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Tue, 18 Mar 2025 16:06:44 +0800</lastBuildDate><atom:link href="https://and2352000.github.io/tags/zod/index.xml" rel="self" type="application/rss+xml"/><item><title>ç”¨ Node.js æ‰“é€  Elegant API Frameworkï¼šawilixã€zodã€zod-openapi çš„å°å…¥èˆ‡æ”¹è®Š</title><link>https://and2352000.github.io/posts/10-elegant-framework-api-node-js/</link><pubDate>Tue, 18 Mar 2025 16:06:44 +0800</pubDate><guid>https://and2352000.github.io/posts/10-elegant-framework-api-node-js/</guid><description>&lt;h1 id="ç”¨-nodejs-æ‰“é€ -elegant-api-frameworkawilixzodzod-openapi-çš„å°å…¥èˆ‡æ”¹è®Š">ç”¨ Node.js æ‰“é€  Elegant API Frameworkï¼šawilixã€zodã€zod-openapi çš„å°å…¥èˆ‡æ”¹è®Š &lt;a href="#%e7%94%a8-nodejs-%e6%89%93%e9%80%a0-elegant-api-frameworkawilixzodzod-openapi-%e7%9a%84%e5%b0%8e%e5%85%a5%e8%88%87%e6%94%b9%e8%ae%8a" class="anchor">ğŸ”—&lt;/a>&lt;/h1>&lt;p>ä»Šå¤©æˆ‘è¦ä¾†èŠèŠæˆ‘çš„å°ˆæ¡ˆï¼š&lt;a href="https://github.com/and2352000/elegant-api-framework-node-js" target="_blank" rel="noopener">Elegant API Framework for Node.js&lt;/a>ã€‚é€™å€‹ API æ¡†æ¶ç›®æ¨™æ˜¯è®“ Node.js API å°ˆæ¡ˆé–‹ç™¼è®Šå¾—æ›´å„ªé›…ï¼Œä½¿ç”¨ &lt;code>awilix&lt;/code>ã€&lt;code>zod&lt;/code> å’Œ &lt;code>zod-openapi&lt;/code> é€™ä¸‰å€‹å·¥å…·ï¼Œè®“æˆ‘çš„å°ˆæ¡ˆè®Šå¾—æ›´ä¹¾æ·¨ã€æ›´æ˜“æ–¼ç¶­è­·ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å°ˆæ¡ˆåˆè¡·å„ªé›…èˆ‡çµæ§‹ä¸¦å­˜">å°ˆæ¡ˆåˆè¡·ï¼šå„ªé›…èˆ‡çµæ§‹ä¸¦å­˜ &lt;a href="#%e5%b0%88%e6%a1%88%e5%88%9d%e8%a1%b7%e5%84%aa%e9%9b%85%e8%88%87%e7%b5%90%e6%a7%8b%e4%b8%a6%e5%ad%98" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;p>æˆ‘ä¸€é–‹å§‹åšé€™å€‹æ¡†æ¶çš„æ™‚å€™ï¼Œå°±æƒ³è¦è§£æ±º Node.js é–‹ç™¼ä¸­å¸¸è¦‹çš„ç—›é»ï¼šä¾è³´ç®¡ç†äº‚ä¸ƒå…«ç³Ÿã€è³‡æ–™é©—è­‰éº»ç…©ã€API æ–‡ä»¶é›£ç”¢ã€‚æˆ‘ç”¨é Expressã€Koaï¼Œä¹Ÿçœ‹é NestJS çš„åšæ³•ï¼ŒNestJS åŸºæœ¬ä¸Šè·Ÿ Spring Boot å¾ˆåƒï¼ŒNestJS ä½¿ç”¨ TypeScript çš„è£é£¾å™¨ä¾†å®šç¾©æ§åˆ¶å™¨ã€æœå‹™å’Œå…¶ä»–çµ„ä»¶ï¼Œé€™èˆ‡ Spring Boot ä½¿ç”¨è¨»è§£ï¼ˆAnnotationsï¼‰ä¾†é…ç½®æ‡‰ç”¨ç¨‹å¼çš„æ–¹å¼ç›¸ä¼¼ï¼Œä½†æˆ‘å¾ˆä¸å–œæ­¡è¢«æ•´å€‹æ¡†æ¶ç¶ä½ï¼Œæœ‰æ™‚å€™è¦ºå¾—æ¡†æ¶çš„å­˜åœ¨é™åˆ¶çš„ç¨‹å¼çš„æ“´å±•æ€§ï¼Œæ–¼æ˜¯ï¼Œæˆ‘æ±ºå®šè‡ªå·±å‹•æ‰‹ï¼Œæ‰“é€ ä¸€å€‹æ—¢æœ‰å½ˆæ€§åˆæœ‰çµæ§‹çš„æ¡†æ¶ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å°å…¥-awilixä¾è³´æ³¨å…¥çš„æ•‘è´–">å°å…¥ awilixï¼šä¾è³´æ³¨å…¥çš„æ•‘è´– &lt;a href="#%e5%b0%8e%e5%85%a5-awilix%e4%be%9d%e8%b3%b4%e6%b3%a8%e5%85%a5%e7%9a%84%e6%95%91%e8%b4%96" class="anchor">ğŸ”—&lt;/a>&lt;/h2>&lt;h3 id="ç‚ºä»€éº¼é¸-awilix">ç‚ºä»€éº¼é¸ awilixï¼Ÿ &lt;a href="#%e7%82%ba%e4%bb%80%e9%ba%bc%e9%81%b8-awilix" class="anchor">ğŸ”—&lt;/a>&lt;/h3>&lt;p>ç‚ºäº†æ¸¬è©¦å®¹æ˜“ï¼Œæˆ‘éœ€è¦èƒ½å¤ è¼•é¬†æ›¿æ›ä¾è³´ï¼Œæ–¼æ˜¯æˆ‘é–‹å§‹æ‰¾ä¾è³´æ³¨å…¥ï¼ˆDIï¼‰çš„è§£æ±ºæ–¹æ¡ˆï¼Œæˆ‘ä»¥å‰å¯« Node.js æ™‚ï¼Œä¾è³´ç®¡ç†å…¨é æ‰‹å‹•ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä¹‹å‰ç‚ºäº†é”åˆ° Dependency Injection çš„å¯«æ³•ï¼Œé€™å€‹å¯«æ³•åªèƒ½é”åˆ°å–®ä¾‹æ¨¡å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// æ‰‹å‹•ä¾è³´æ³¨å…¥
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">export&lt;/span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">UserService&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#a6e22e">instance&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">UserService&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#a6e22e">constructor&lt;/span>(&lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#a6e22e">readonly&lt;/span> &lt;span style="color:#a6e22e">db&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">Database&lt;/span>) {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#a6e22e">getInstance&lt;/span>()&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">UserService&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">!&lt;/span>&lt;span style="color:#a6e22e">UserService&lt;/span>.&lt;span style="color:#a6e22e">instance&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">UserService&lt;/span>.&lt;span style="color:#a6e22e">instance&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">UserService&lt;/span>(&lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">Database&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#a6e22e">UserService&lt;/span>.&lt;span style="color:#a6e22e">instance&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>NestJS çš„ DI å¾ˆå¼·ï¼Œä½†å¤ªé‡é‡ç´šï¼›InversifyJS ä¹Ÿä¸éŒ¯ï¼Œä½†ä¹Ÿè¦ä¾é å¯¦é©—æ€§çš„åŠŸèƒ½ &lt;code>reflect-metadata&lt;/code> é€™é»æˆ‘ä¸æ˜¯å¾ˆå–œæ­¡ã€‚æœ€å¾Œæˆ‘ç™¼ç¾äº† &lt;code>awilix&lt;/code>ï¼Œä¸€å€‹è¼•é‡åˆç›´è§€çš„ DI å®¹å™¨ï¼Œå®Œç¾ç¬¦åˆæˆ‘çš„éœ€æ±‚ã€‚&lt;/p></description></item></channel></rss>