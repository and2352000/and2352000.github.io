<!doctype html><html lang=en-us><head><title>Ethereum Development | Aaron's Blog</title>
<meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="How to generate etheruem key pair 🔗key generate
Ethereum Application Development 🔗 Enviriment 🔗Ubuntu 16.04LTS server Geth 1.83 stable Nodejs 8.11.1 web3.js 0.20.1
eth-netstats 🔗It look like there&rsquo;re two part one is netstats(監控端),and another one is client(客戶端) https://kairen.github.io/2017/05/26/blockchain/geth-monitoring/
Web3.js 🔗go-ethereum和parity支援web3.js :::warning 如果你要透過套件安裝web3.js 的library，要注意geth內的web3版本(web3.version)，之前使用1.X.X版本有問題，目前改為0.2X.X版 :::
可以由此查看web3.js版本0.20.1 API v0.2X.X
Upadate 2018/6/4 : web3.js 1.0.0 is more efficient accounts.sign v.s eth.sign 🔗There&rsquo;s a little bit diff between accounts.sign & eth.sign, you can&rsquo;t encode by one of the and decode by another one."><meta name=generator content="Hugo 0.123.4"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-0YBZ467R0Y"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0YBZ467R0Y",{anonymize_ip:!1})}</script></head><body><nav class=navigation><a href=/><span class=arrow>←</span>Home</a>
<a href=/posts>Archive</a>
<a href=/tags>Tags</a>
<a href=/about>About</a></nav><main class=main><section id=single><h1 class=title>Ethereum Development</h1><div class=tip><time datetime="2018-06-07 14:01:30 +0800 +0800">Jun 7, 2018</time>
<span class=split>·
</span><span>356 words
</span><span class=split>·
</span><span>2 minute read</span></div><div class=content><h2 id=how-to-generate-etheruem-key-pair>How to generate etheruem key pair <a href=#how-to-generate-etheruem-key-pair class=anchor>🔗</a></h2><p><a href=https://kobl.one/blog/create-full-ethereum-keypair-and-address/#generating-the-ec-private-key target=_blank rel=noopener>key generate</a></p><h2 id=ethereum-application-development>Ethereum Application Development <a href=#ethereum-application-development class=anchor>🔗</a></h2><p><p class=markdown-image><img src=https://i.imgur.com/FHLFkSe.png alt></p></p><h2 id=enviriment>Enviriment <a href=#enviriment class=anchor>🔗</a></h2><p>Ubuntu 16.04LTS server
Geth 1.83 stable
Nodejs 8.11.1
web3.js 0.20.1</p><h2 id=eth-netstats>eth-netstats <a href=#eth-netstats class=anchor>🔗</a></h2><p>It look like there&rsquo;re two part one is netstats(監控端),and another one is client(客戶端)
<a href=https://kairen.github.io/2017/05/26/blockchain/geth-monitoring/ target=_blank rel=noopener>https://kairen.github.io/2017/05/26/blockchain/geth-monitoring/</a></p><h2 id=web3js>Web3.js <a href=#web3js class=anchor>🔗</a></h2><p>go-ethereum和parity支援web3.js
:::warning
如果你要透過套件安裝web3.js 的library，要注意geth內的web3版本(web3.version)，之前使用1.X.X版本有問題，目前改為0.2X.X版
:::</p><p>可以<a href=https://www.versioneye.com/nodejs/web3/0.20.1 target=_blank rel=noopener>由此</a>查看web3.js版本0.20.1
<a href=https://github.com/ethereum/wiki/wiki/JavaScript-API target=_blank rel=noopener>API v0.2X.X</a></p><ul><li>Upadate 2018/6/4 : web3.js 1.0.0 is more efficient</li></ul><h3 id=accountssign-vs-ethsign>accounts.sign v.s eth.sign <a href=#accountssign-vs-ethsign class=anchor>🔗</a></h3><p>There&rsquo;s a little bit diff between accounts.sign & eth.sign, you can&rsquo;t encode by one of the and decode by another one. That&rsquo;s because they are encode with diff parameter.
<a href=https://ethereum.stackexchange.com/questions/35425/web3-js-eth-sign-vs-eth-accounts-sign-producing-different-signatures target=_blank rel=noopener>Web3.js : eth.sign() vs eth.accounts.sign() — producing different signatures?</a></p><p>Old way : <a href=https://medium.com/taipei-ethereum-meetup/%e7%94%a8ecrecover%e4%be%86%e9%a9%97%e7%b0%bd%e5%90%8d-694fa8ae3638 target=_blank rel=noopener>eth.sign</a>
New way : <a href=https://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html#sign target=_blank rel=noopener>accounts.sign</a>(more ez to use it can recover without contract)</p><h2 id=geth>Geth <a href=#geth class=anchor>🔗</a></h2><h3 id=how-to-add-account-into-geth>how to add account into geth? <a href=#how-to-add-account-into-geth class=anchor>🔗</a></h3><p>Copy keyfile(File name begin with UTC&mldr;) into floder which call keystore in the local of geth.</p><p>What is an Ethereum keystore file?
<a href=https://medium.com/@julien.m./what-is-an-ethereum-keystore-file-86c8c5917b97 target=_blank rel=noopener>Keystore file</a></p><h3 id=link-multi-node-together>Link multi node together <a href=#link-multi-node-together class=anchor>🔗</a></h3><p><a href=https://github.com/OSE-Lab/learning-blockchain/blob/master/ethereum/docker-geth-multi-nodes.md target=_blank rel=noopener>https://github.com/OSE-Lab/learning-blockchain/blob/master/ethereum/docker-geth-multi-nodes.md</a></p><h2 id=smart-contract-solidity>Smart Contract-solidity <a href=#smart-contract-solidity class=anchor>🔗</a></h2><h3 id=how-to-return-whole-struct>how to return whole struct? <a href=#how-to-return-whole-struct class=anchor>🔗</a></h3><p>You can not return struct cuz the length of interface, but there is a solution. You can return them with chunks sperate them to the peices like example downblow.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-solidity data-lang=solidity><span style=display:flex><span><span style=color:#66d9ef>pragma solidity</span> <span style=color:#f92672>^</span><span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>4</span>.<span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>contract</span> <span style=color:#a6e22e>Cloud2</span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Metadata</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>string</span> fileName;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>address</span> addr;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>bytes16</span> hashId;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>uint</span> timestamp;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>mapping</span>(<span style=color:#66d9ef>bytes16</span> <span style=color:#f92672>=&gt;</span> Metadata) <span style=color:#66d9ef>public</span> fileInfos;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setFile</span>(<span style=color:#66d9ef>string</span> fileName, <span style=color:#66d9ef>address</span> addr,<span style=color:#66d9ef>bytes16</span> hashId, <span style=color:#66d9ef>uint</span> timestamp) <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>returns</span>(<span style=color:#66d9ef>bytes16</span>){
</span></span><span style=display:flex><span>        fileInfos[hashId]<span style=color:#f92672>=</span>Metadata(fileName,addr,hashId,timestamp);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> hashId;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getFileWithHash</span>(<span style=color:#66d9ef>bytes16</span> hashId) <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>constant</span> <span style=color:#66d9ef>returns</span>(<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>address</span>, <span style=color:#66d9ef>uint</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> (fileInfos[hashId].fileName, fileInfos[hashId].addr, fileInfos[hashId].timestamp);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=how-to-call-the-method>How to call the method? <a href=#how-to-call-the-method class=anchor>🔗</a></h3><p>There are few way to call. If you need to change the value in contract you should pay the gas(send the trancation to call)</p><p><strong>Contract Method</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-solidity data-lang=solidity><span style=display:flex><span><span style=color:#75715e>// Automatically determines the use of call or sendTransaction based on the method type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>myContractInstance.myMethod(param1 [, param2, ...] [, transactionObject] [, defaultBlock] [, callback]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Explicitly calling this method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>myContractInstance.myMethod.call(param1 [, param2, ...] [, transactionObject] [, defaultBlock] [, callback]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Explicitly sending a transaction to this method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>myContractInstance.myMethod.sendTransaction(param1 [, param2, ...] [, transactionObject] [, callback]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Get the call data, so you can call the contract through some other means
</span></span></span><span style=display:flex><span><span style=color:#75715e>// var myCallData = myContractInstance.myMethod.request(param1 [, param2, ...]);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> myCallData <span style=color:#f92672>=</span> myContractInstance.myMethod.getData(param1 [, param2, ...]);
</span></span><span style=display:flex><span><span style=color:#75715e>// myCallData = &#39;0x45ff3ff6000000000004545345345345..&#39;
</span></span></span></code></pre></div><p><a href=https://github.com/ethereum/wiki/wiki/JavaScript-API#contract-methods target=_blank rel=noopener>web3.js 0.2x.x</a></p></div><div class=tags><a href=https://and2352000.github.io/tags/ethereum>ethereum</a>
<a href=https://and2352000.github.io/tags/evm>evm</a>
<a href=https://and2352000.github.io/tags/blockchain>blockchain</a></div></section></main><footer id=footer><div class=copyright>© Copyright
2024
<span class=split><svg fill="#bbb" width="15" height="15" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><path d="M13.91 6.75c-1.17 2.25-4.3 5.31-6.07 6.94-.1903.1718-.4797.1718-.67.0C5.39 12.06 2.26 9 1.09 6.75-1.48 1.8 5-1.5 7.5 3.45 10-1.5 16.48 1.8 13.91 6.75z"/></svg></span></div><div class=powerby>Powered by <a href=http://www.gohugo.io/>Hugo</a> Theme By <a href=https://github.com/nodejh/hugo-theme-mini>nodejh</a></div></footer></body></html>